<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>TEI Output &mdash; nidaba 0.9.7-4-gaa610eb
 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.9.7-4-gaa610eb
',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="nidaba 0.9.7-4-gaa610eb
 documentation" href="index.html" />
    <link rel="next" title="RESTful API" href="api.html" />
    <link rel="prev" title="Option Groups" href="options.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="tei-output">
<span id="id1"></span><h1>TEI Output<a class="headerlink" href="#tei-output" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="http://www.tei-c.org/">TEI</a> is a consortium maintaining standards for the
representation of texts in digital form which are widely used in the
humanities. Nidaba is capable of encoding the OCR results and their metadata
into XML documents following the most recent <a class="reference external" href="http://www.tei-c.org/Guidelines/P5/">P5 guidelines</a>. The output is designed to facilitate
further manual annotation.</p>
<div class="section" id="format">
<h2>Format<a class="headerlink" href="#format" title="Permalink to this headline">¶</a></h2>
<p>Fundamentally output is generated following the <a class="reference external" href="http://www.tei-c.org/release/doc/tei-p5-doc/en/html/PH.html#PHZLAB">embedded transcription</a> scheme
with a single surface containing all recognized line elements with their
textual representation.</p>
<p>The (body) skeleton of a TEI-OCR file will look like this:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;sourceDoc&gt;</span>
    <span class="nt">&lt;surface</span> <span class="na">ulx=</span><span class="s">&quot;0&quot;</span> <span class="na">uly=</span><span class="s">&quot;0&quot;</span> <span class="na">lrx=</span><span class="s">&quot;500&quot;</span> <span class="na">lry=</span><span class="s">&quot;500&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;graphic</span> <span class="na">url=</span><span class="s">&quot;foo.png&quot;</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;zone&gt;</span>
            <span class="nt">&lt;line</span> <span class="na">ulx=</span><span class="s">a</span> <span class="na">uly=</span><span class="s">b</span> <span class="na">lrx=</span><span class="s">c</span> <span class="na">lry=</span><span class="s">d</span> <span class="na">resp=</span><span class="s">&quot;#resp_0&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;zone</span> <span class="na">lrx=</span><span class="s">&quot;1028&quot;</span> <span class="na">lry=</span><span class="s">&quot;182&quot;</span> <span class="na">type=</span><span class="s">&quot;segment&quot;</span> <span class="na">ulx=</span><span class="s">&quot;593&quot;</span> <span class="na">uly=</span><span class="s">&quot;119&quot;</span> <span class="na">xml:id=</span><span class="s">&quot;seg_0&quot;</span> <span class="na">resp=</span><span class="s">&quot;#resp_1&quot;</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;zone</span> <span class="na">lrx=</span><span class="s">&quot;629&quot;</span> <span class="na">lry=</span><span class="s">&quot;182&quot;</span> <span class="na">resp=</span><span class="s">&quot;#resp_1&quot;</span> <span class="na">type=</span><span class="s">&quot;grapheme&quot;</span> <span class="na">ulx=</span><span class="s">&quot;593&quot;</span> <span class="na">uly=</span><span class="s">&quot;119&quot;</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;seg&gt;</span>
                            <span class="nt">&lt;g</span> <span class="na">xml:id=</span><span class="s">&quot;grapheme_0&quot;</span> <span class="na">resp=</span><span class="s">&quot;#resp_1&quot;</span><span class="nt">&gt;</span>5<span class="nt">&lt;/g&gt;</span>
                        <span class="nt">&lt;/seg&gt;</span>
                        <span class="nt">&lt;certainty</span> <span class="na">degree=</span><span class="s">&quot;0.83&quot;</span> <span class="na">locus=</span><span class="s">&quot;value&quot;</span> <span class="na">target=</span><span class="s">&quot;#grapheme_0&quot;</span> <span class="na">resp=</span><span class="s">&quot;#resp_1&quot;</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;/zone&gt;</span>
                    <span class="nt">&lt;zone</span> <span class="na">lrx=</span><span class="s">&quot;1028&quot;</span> <span class="na">lry=</span><span class="s">&quot;182&quot;</span> <span class="na">resp=</span><span class="s">&quot;#resp_1&quot;</span> <span class="na">type=</span><span class="s">&quot;grapheme&quot;</span> <span class="na">ulx=</span><span class="s">&quot;629&quot;</span> <span class="na">uly=</span><span class="s">&quot;119&quot;</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;seg&gt;</span>
                            <span class="nt">&lt;g</span> <span class="na">xml:id=</span><span class="s">&quot;grapheme_1&quot;</span> <span class="na">resp=</span><span class="s">&quot;#resp_1&quot;</span><span class="nt">&gt;</span>4<span class="nt">&lt;/g&gt;</span>
                        <span class="nt">&lt;/seg&gt;</span>
                        <span class="nt">&lt;certainty</span> <span class="na">degree=</span><span class="s">&quot;0.99&quot;</span> <span class="na">locus=</span><span class="s">&quot;value&quot;</span> <span class="na">target=</span><span class="s">&quot;#grapheme_1&quot;</span> <span class="na">resp=</span><span class="s">&quot;#resp_1&quot;</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;/zone&gt;</span>
                <span class="nt">&lt;/zone&gt;</span>
                <span class="nt">&lt;zone</span> <span class="na">lrx=</span><span class="s">&quot;1066&quot;</span> <span class="na">lry=</span><span class="s">&quot;182&quot;</span> <span class="na">resp=</span><span class="s">&quot;#resp_1&quot;</span> <span class="na">type=</span><span class="s">&quot;grapheme&quot;</span> <span class="na">ulx=</span><span class="s">&quot;1028&quot;</span> <span class="na">uly=</span><span class="s">&quot;119&quot;</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;seg&gt;</span>
                        <span class="nt">&lt;g</span> <span class="na">xml:id=</span><span class="s">&quot;grapheme_2&quot;</span> <span class="na">resp=</span><span class="s">&quot;#resp_1&quot;</span><span class="nt">&gt;</span> <span class="nt">&lt;/g&gt;</span>
                    <span class="nt">&lt;/seg&gt;</span>
                    <span class="nt">&lt;certainty</span> <span class="na">degree=</span><span class="s">&quot;0.97&quot;</span> <span class="na">locus=</span><span class="s">&quot;value&quot;</span> <span class="na">target=</span><span class="s">&quot;#grapheme_2&quot;</span> <span class="na">resp=</span><span class="s">&quot;#resp_1&quot;</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/zone&gt;</span>
                <span class="nt">&lt;zone</span> <span class="na">lrx=</span><span class="s">&quot;1199&quot;</span> <span class="na">lry=</span><span class="s">&quot;182&quot;</span> <span class="na">type=</span><span class="s">&quot;segment&quot;</span> <span class="na">ulx=</span><span class="s">&quot;1066&quot;</span> <span class="na">uly=</span><span class="s">&quot;119&quot;</span> <span class="na">xml:id=</span><span class="s">&quot;seg_1&quot;</span> <span class="na">resp=</span><span class="s">&quot;#resp_1&quot;</span><span class="nt">&gt;</span>
                ...
                <span class="nt">&lt;/zone&gt;</span>
            <span class="nt">&lt;/line&gt;</span>
            <span class="nt">&lt;line</span> <span class="na">ulx=</span><span class="s">a</span> <span class="na">uly=</span><span class="s">b</span> <span class="na">lrx=</span><span class="s">c</span> <span class="na">lry=</span><span class="s">d</span><span class="nt">&gt;</span>
            ...
            <span class="nt">&lt;/line&gt;</span>
        <span class="nt">&lt;/zone&gt;</span>
    <span class="nt">&lt;/surface&gt;</span>
<span class="nt">&lt;/sourceDoc&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <a class="reference external" href="http://www.tei-c.org/release/doc/tei-p5-doc/en/html/ref-g.html">g</a>
tag does NOT encode single characters but entities fed into the character
recognition engine. These entities are called <a class="reference external" href="http://www.unicode.org/reports/tr29/">grapheme clusters</a> and may correspond to a single
character/codepoint, multiple codepoints or in the case of ligatures
decomposited by the engine even to multiple characters (œ to oe).</p>
</div>
</div>
<div class="section" id="header">
<h2>Header<a class="headerlink" href="#header" title="Permalink to this headline">¶</a></h2>
<p>Most of the TEI header is filled using the
<a class="reference internal" href="options.html#nidaba.tasks.output.tei_metadata" title="nidaba.tasks.output.tei_metadata"><code class="xref py py-func docutils literal"><span class="pre">nidaba.tasks.output.tei_metadata()</span></code></a> task.</p>
</div>
<div class="section" id="attribution">
<h2>Attribution<a class="headerlink" href="#attribution" title="Permalink to this headline">¶</a></h2>
<p>The source of a particular element is usually attributed using a series of
<a class="reference external" href="http://www.tei-c.org/release/doc/tei-p5-doc/en/html/ref-respStmt.html">respStmt</a> block
in the header of the document. A common example encoding a page segmentation
and character recognition as two sources of data in the document will resemble
these two statements:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;respStmt</span> <span class="na">xml:id=</span><span class="s">&quot;resp_0&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;resp&gt;</span>page segmentation<span class="nt">&lt;/resp&gt;</span>
    <span class="nt">&lt;name&gt;</span>tesseract<span class="nt">&lt;/name&gt;</span>
<span class="nt">&lt;/respStmt&gt;</span>
<span class="nt">&lt;respStmt</span> <span class="na">xml:id=</span><span class="s">&quot;resp_1&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;resp&gt;</span>character recognition<span class="nt">&lt;/resp&gt;</span>
    <span class="nt">&lt;name&gt;</span>kraken<span class="nt">&lt;/name&gt;</span>
<span class="nt">&lt;/respStmt&gt;</span>
</pre></div>
</div>
<p>Elements themselves are linked to these statements using the <a class="reference external" href="http://www.tei-c.org/release/doc/tei-p5-doc/en/html/ref-att.global.responsibility.html#tei_att.resp">resp</a>
attribute:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;g</span> <span class="na">xml:id=</span><span class="s">&quot;grapheme_9&quot;</span> <span class="na">resp=</span><span class="s">&quot;#resp_1&quot;</span><span class="nt">&gt;</span>x<span class="nt">&lt;/g&gt;</span>
</pre></div>
</div>
<p>When merging the output of multiple OCR engines diverging <code class="docutils literal"><span class="pre">readings</span></code> will
also be attributed to their origin using the <code class="docutils literal"><span class="pre">respStmt</span></code> tag. Alternative
spellings provided by a spell checker will also be properly attributed.</p>
</div>
<div class="section" id="certainty">
<h2>Certainty<a class="headerlink" href="#certainty" title="Permalink to this headline">¶</a></h2>
<p>Some recognition results will have a confidence value using the certainty tag
associated with them:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;zone</span> <span class="na">lrx=</span><span class="s">&quot;526&quot;</span> <span class="na">lry=</span><span class="s">&quot;291&quot;</span> <span class="na">resp=</span><span class="s">&quot;#resp_1&quot;</span> <span class="na">type=</span><span class="s">&quot;grapheme&quot;</span> <span class="na">ulx=</span><span class="s">&quot;422&quot;</span> <span class="na">uly=</span><span class="s">&quot;225&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;seg&gt;</span>
        <span class="nt">&lt;g</span> <span class="na">xml:id=</span><span class="s">&quot;grapheme_0&quot;</span> <span class="na">resp=</span><span class="s">&quot;#resp_1&quot;</span><span class="nt">&gt;</span>Μ<span class="nt">&lt;/g&gt;</span>
    <span class="nt">&lt;/seg&gt;</span>
    <span class="nt">&lt;certainty</span> <span class="na">degree=</span><span class="s">&quot;0.76&quot;</span> <span class="na">locus=</span><span class="s">&quot;value&quot;</span> <span class="na">target=</span><span class="s">&quot;#grapheme_0&quot;</span> <span class="na">resp=</span><span class="s">&quot;#resp_1&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/zone&gt;</span>
</pre></div>
</div>
<p>These necessarily refer to the identifier of the targeted element using the
<code class="docutils literal"><span class="pre">target</span></code> attribute. The probability is a float value between 0 and 1 with
higher values indicating higher confidence in the results.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">nidaba</a></h1>



<p class="blurb">An expandable and scalable OCR pipeline</p>



<p>
<iframe src="https://ghbtns.com/github-btn.html?user=openphilology&repo=nidaba&type=watch&count=true&size=large"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>




    

<p>
<a href="https://travis-ci.org/OpenPhilology/nidaba">
    <img
        alt="https://secure.travis-ci.org/OpenPhilology/nidaba.png?branch=master"
        src="https://secure.travis-ci.org/OpenPhilology/nidaba.png?branch=master"
    >
</a>
</p>
<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="options.html">Option Groups</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">TEI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#format">Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="#header">Header</a></li>
<li class="toctree-l2"><a class="reference internal" href="#attribution">Attribution</a></li>
<li class="toctree-l2"><a class="reference internal" href="#certainty">Certainty</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api.html">Web API</a></li>
<li class="toctree-l1"><a class="reference internal" href="source/modules.html">API Docs</a></li>
</ul>


<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2014-2015, Open Greek and Latin.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.6</a>
      
      |
      <a href="_sources/tei.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>